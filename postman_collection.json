{
	"info": {
		"_postman_id": "servilab-collection",
		"name": "ServiLab API",
		"description": "Colección de endpoints para la API de ServiLab",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Notificaciones",
			"item": [
				{
					"name": "Turno Confirmado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"telefono\": \"+5491112345678\",\n    \"customer_first_name\": \"Juan\",\n    \"appointment_start_date\": \"2024-03-20\",\n    \"appointment_start_time\": \"14:30\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notificacion/turno-confirmado",
							"host": ["{{base_url}}"],
							"path": ["notificacion", "turno-confirmado"]
						},
						"description": "Envía una notificación de turno confirmado al cliente"
					}
				},
				{
					"name": "Seguro de Lluvia",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"telefono\": \"+5491112345678\",\n    \"customer_first_name\": \"Juan\",\n    \"cupon\": \"LLUVIA123\",\n    \"fechaValidoHasta\": \"2024-03-23\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notificacion/seguro-lluvia",
							"host": ["{{base_url}}"],
							"path": ["notificacion", "seguro-lluvia"]
						},
						"description": "Envía una notificación de seguro de lluvia activado"
					}
				},
				{
					"name": "PIN Llaves",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"telefono\": \"+5491112345678\",\n    \"customer_first_name\": \"Juan\",\n    \"codigo\": \"1234\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notificacion/pin-llaves",
							"host": ["{{base_url}}"],
							"path": ["notificacion", "pin-llaves"]
						},
						"description": "Envía una notificación con el PIN para retirar las llaves"
					}
				},
				{
					"name": "Recordatorio",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"telefono\": \"+5491112345678\",\n    \"customer_first_name\": \"Juan\",\n    \"appointment_start_date\": \"2024-03-20\",\n    \"appointment_start_time\": \"14:30\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notificacion/recordatorio",
							"host": ["{{base_url}}"],
							"path": ["notificacion", "recordatorio"]
						},
						"description": "Envía un recordatorio del turno al cliente"
					}
				},
				{
					"name": "Lavado Completado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"telefono\": \"+5491112345678\",\n    \"customer_first_name\": \"Juan\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notificacion/lavado-completado",
							"host": ["{{base_url}}"],
							"path": ["notificacion", "lavado-completado"]
						},
						"description": "Notifica al cliente que su vehículo está listo"
					}
				}
			]
		},
		{
			"name": "Encuestas",
			"item": [
				{
					"name": "Enviar Encuesta",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"telefono\": \"+5491112345678\",\n    \"nombre\": \"Juan\",\n    \"apellido\": \"Pérez\",\n    \"lavado\": \"SuperLavado\",\n    \"appointment_start_date\": \"2024-03-20\",\n    \"appointment_start_time\": \"14:30\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/enviar-encuesta",
							"host": ["{{base_url}}"],
							"path": ["enviar-encuesta"]
						},
						"description": "Envía una encuesta de satisfacción al cliente"
					}
				},
				{
					"name": "Listar Encuestas Pendientes",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/debug/pendientes",
							"host": ["{{base_url}}"],
							"path": ["debug", "pendientes"]
						},
						"description": "Lista todas las encuestas pendientes"
					}
				}
			]
		},
		{
			"name": "Webhook",
			"item": [
				{
					"name": "Webhook WhatsApp",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"event\": \"vote_update\",\n    \"data\": {\n        \"vote\": {\n            \"voter\": \"5491112345678@c.us\",\n            \"selectedOptions\": [\n                {\n                    \"name\": \"Excelente ⭐️\",\n                    \"localId\": 0\n                }\n            ],\n            \"parentMessage\": {\n                \"id\": {\n                    \"id\": \"ABC123\"\n                }\n            }\n        }\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/webhook/waapi",
							"host": ["{{base_url}}"],
							"path": ["webhook", "waapi"]
						},
						"description": "Webhook para recibir actualizaciones de WhatsApp"
					}
				}
			]
		},
		{
			"name": "Utilidades",
			"item": [
				{
					"name": "Test",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/test",
							"host": ["{{base_url}}"],
							"path": ["test"]
						},
						"description": "Endpoint de prueba que devuelve información del servidor"
					}
				},
				{
					"name": "Generar API Key",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/dev/generate-key?test=false",
							"host": ["{{base_url}}"],
							"path": ["dev", "generate-key"],
							"query": [
								{
									"key": "test",
									"value": "false",
									"description": "true para generar una key de prueba, false para producción"
								}
							]
						},
						"description": "Genera una nueva API key (solo disponible en desarrollo)"
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000",
			"type": "string",
			"description": "URL base de la API"
		},
		{
			"key": "api_key",
			"value": "sl_live_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx_xxxxxx",
			"type": "string",
			"description": "API key para autenticación"
		}
	]
} 